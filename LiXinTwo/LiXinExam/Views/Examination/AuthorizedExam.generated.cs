#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.18444
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace LiXinExam.Views.Examination
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 1 "..\..\Views\Examination\AuthorizedExam.cshtml"
    using LiXinLanguage;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "1.5.4.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Examination/AuthorizedExam.cshtml")]
    public partial class AuthorizedExam : System.Web.Mvc.WebViewPage<dynamic>
    {
        public AuthorizedExam()
        {
        }
        public override void Execute()
        {


            
            #line 2 "..\..\Views\Examination\AuthorizedExam.cshtml"
  
    ViewBag.Title = "授权参考人";
    Layout = null;


            
            #line default
            #line hidden
WriteLiteral("\r\n<input type=\"hidden\" id=\"examinationId\" value=\"");


            
            #line 7 "..\..\Views\Examination\AuthorizedExam.cshtml"
                                          Write(ViewData["examinationId"]);

            
            #line default
            #line hidden
WriteLiteral("\" />\r\n<input type=\"hidden\" id=\"AllUserID\" value=\"\" />\r\n<input type=\"hidden\" id=\"p" +
"ersonids\" value=\"");


            
            #line 9 "..\..\Views\Examination\AuthorizedExam.cshtml"
                                      Write(ViewData["personids"]);

            
            #line default
            #line hidden
WriteLiteral(@""" />
<input type=""hidden"" id=""SelectUserFlag"" value="""" />
<div id=""Search"" class=""so-set"">
    <table class=""tab-Form"">
        <tr>
            <td class=""Tit span4"">工号：</td><td class=""span21""><input type=""text"" class=""span8"" id=""PersonCode"" /></td>
            <td class=""Tit span4"">姓名：</td><td><input type=""text"" class=""span8"" id=""PersonName"" /></td>
            <td class=""so-do"" rowspan=""2""><input type=""button"" class=""btn"" value=""搜索"" id=""SelectPerson"" /></td>
        </tr>
        <tr>
            <td class=""Tit"">部门：</td><td><input type=""text"" class=""span20"" id=""PersonDepartment"" /></td>
            <td class=""Tit"">岗位：</td><td><input type=""text"" class=""span20"" id=""PersonPost"" /></td>
        </tr>
        ");



WriteLiteral(@"
    </table>
</div>
<div class=""so-seq"">
    <div class=""list-do"">
        <a id=""AuthorizeDepartment"">授权部门</a>
        <a id=""AuthorizePost"">授权岗位</a>
        <a id=""AuthorizePerson"">授权人员</a>
        <a id=""DeletePerson"">批量删除</a> 
    </div>
</div>

<div id=""Content"">
    <table class=""tab-List mt10"">
        <thead>
            <tr>
                <th class=""span3"">
                    <input id=""selectall"" type=""checkbox"" value=""0"">
                </th>
                <th class=""span20"">姓名(工号)</th>
                <th>部门与岗位</th>
                <th class=""span20"">邮箱</th>
                <th class=""span4"">操作</th>
            </tr>
        </thead>
        <tbody id=""personlist""></tbody>
        <tfoot></tfoot>
    </table>
   ");



WriteLiteral("\r\n</div>\r\n<script id=\"userListTemplate\" type=\"text/x-jsrender\">\r\n    {{for #data}" +
"}\r\n     <tr>\r\n        <td><input type=\"checkbox\" id=\'{{:UserId}}\' value=\'{{:User" +
"Id}}\' /></td>\r\n        <td>\r\n            <div class=\"headPic\">\r\n                " +
"<img src=\"../../Images/photo/default.jpg\" />\r\n                <span class=\"Icon_" +
"16 {{:Sex==1?\'Icon_Girl\':\'Icon_Boy\'}}\" title=\"{{:SexStr}}\">{{:SexStr}}</span>\r\n " +
"           </div>\r\n            <p class=\"c33\"><strong title=\"{{:Realname}}\">{{:R" +
"ealname}}</strong></p>\r\n            <p>\r\n                <span class=\"Num\">{{:Jo" +
"bNum}}</span>\r\n                {{if Status == 1}}\r\n                <span class=\"" +
"Icon_16 Icon_Frost\" title=\"已冻结\" ></span>\r\n                {{/if}}\r\n            <" +
"/p>\r\n        </td>\r\n        <td>\r\n            <p>{{:DeptCode}}</p>\r\n            " +
"<p class=\"c_green\">{{:PostCode}}</p>\r\n         </td>\r\n         <td>{{:Email}}</t" +
"d>\r\n         <td>\r\n            <a title=\"删除\" onclick=\"Delete(\'{{:UserId}}\');\" cl" +
"ass=\"icon idel\"></a>\r\n         </td>\r\n      </tr>\r\n    {{/for}}\r\n</script>\r\n<scr" +
"ipt id=\"userBlockTemlpate\" type=\"text/x-jsrender\">\r\n    {{for #data}}\r\n        <" +
"dl style=\"height: 110px; width:200px;\">\r\n            <dd>\r\n                <img " +
"src=\"../../Images/photo/default.jpg\" />\r\n                <span class=\"Icon_16 {{" +
":Sex==1?\'Icon_Girl\':\'Icon_Boy\'}}\" title=\"{{:SexStr}}\">{{:SexStr}}</span>\r\n      " +
"          <a class=\"Icon_16 Icon_Frost\" alt=\"{{:Status == 1?\'已冻结\':\'未冻结\'}}\" title" +
"=\"{{:Status == 1?\'已冻结\':\'未冻结\'}}\"></a>\r\n            </dd>\r\n            <dt>\r\n     " +
"           <h5><input type=\"checkbox\" id=\'{{:UserId}}\' value=\'{{:UserId}}\'/><lab" +
"el>{{:Realname}}<span class=\"Num\">{{:JobNum}}</span></label></h5>\r\n            <" +
"/dt>\r\n            <dt>{{:DeptCode}}</dt>\r\n            <dt class=\"multi\"><span cl" +
"ass=\"c_green\">{{:PostCode}}</span></dt>\r\n            <dt>{{:RoleName}}</dt>\r\n   " +
"         <dt>{{:Email}}</dt>\r\n            <dt class=\"Doing dis\">\r\n              " +
"  <a class=\"Icon_20 Icon_Del\" title=\"删除\"  onclick=\"Delete(\'{{:UserId}}\');\"></a>\r" +
"\n            </dt>\r\n        </dl>\r\n    {{/for}}\r\n</script>\r\n\r\n<script type=\"text" +
"/javascript\">\r\n    function changeView(str) {\r\n        ChangeList({ str: str, fu" +
"n: function() { InitTable(); } });\r\n    }\r\n\r\n\r\n    $(document).ready(function() " +
"{\r\n        $(\"#AuthorizeDepartment\").bind(\"click\", function() {\r\n            $(\"" +
"#PersonCode,#PersonName,#PersonDepartment,#PersonPost\").val(\"\");\r\n            ar" +
"t.dialog.load(\'/UserCommon/DeptTree?flag=0&type=checkbox&buttonShow=1\', { title:" +
" \'授权部门\', id: \'DeptTree\' });\r\n        });\r\n\r\n        $(\"#AuthorizePost\").bind(\"cl" +
"ick\", function() {\r\n            $(\"#PersonCode,#PersonName,#PersonDepartment,#Pe" +
"rsonPost\").val(\"\");\r\n            art.dialog.load(\'/UserCommon/PostTree?flag=0&ty" +
"pe=checkbox&buttonShow=1\', { title: \'授权岗位\', id: \'PostTree\' });\r\n        });\r\n\r\n " +
"       $(\"#AuthorizePerson\").bind(\"click\", function() {\r\n            $(\"#PersonC" +
"ode,#PersonName,#PersonDepartment,#PersonPost\").val(\"\");\r\n            $(\"#AllUse" +
"rID\").val($(\"#personids\").val());\r\n            $(\"#SelectUserFlag\").val(\"Authori" +
"zedExam\");\r\n\r\n            art.dialog.load(\"/UserCommon/SelectUser\", { title: \"添加" +
"人员\", id: \"SelUser\"});\r\n        });\r\n\r\n        $(\"#SelectPerson\").bind(\"click\", f" +
"unction() {\r\n            InitTable();\r\n        });\r\n\r\n        $(\"#DeletePerson\")" +
".bind(\"click\", function() {\r\n            var ids = GetChecked(\"personlist\");\r\n  " +
"          if (ids == \"\") {\r\n                //art.dialog({ content: \"请选择人员！\", ti" +
"me: 3 });\r\n                art.dialog.tips(\"请选择人员\", 3);\r\n                return;" +
"\r\n            }\r\n            art.dialog({\r\n                title: \"");


            
            #line 143 "..\..\Views\Examination\AuthorizedExam.cshtml"
                   Write(LiXinLanguage.CommonLanguage.Common_Tip);

            
            #line default
            #line hidden
WriteLiteral("\",\r\n                content: \'确认删除？\',\r\n                width: 200,\r\n             " +
"   okValue: \'");


            
            #line 146 "..\..\Views\Examination\AuthorizedExam.cshtml"
                     Write(LiXinLanguage.CommonLanguage.Common_Sure);

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                cancelValue: \'");


            
            #line 147 "..\..\Views\Examination\AuthorizedExam.cshtml"
                         Write(LiXinLanguage.CommonLanguage.Common_Cancel);

            
            #line default
            #line hidden
WriteLiteral(@"',
                height: 50,
                fixed: true,
                lock: true,
                ok: function () {
                    $.getJSON(""/Examination/ExamDelAuthorizedPerson"", { newIds: ids, oldIds: $(""#personids"").val() }, function (data) {
                        $(""#personids"").val(data);
                        //更新列表
                        InitTable();
                    });
                },
                cancel: function () {
                }
            });
        });

        InitTable();
    });

    function Delete(id) {
        art.dialog({
            title: """);


            
            #line 168 "..\..\Views\Examination\AuthorizedExam.cshtml"
               Write(CommonLanguage.Common_Tip);

            
            #line default
            #line hidden
WriteLiteral("\",\r\n            content: \'是否确定删除选中的人员？\',\r\n            width: 200,\r\n            ok" +
"Value: \'");


            
            #line 171 "..\..\Views\Examination\AuthorizedExam.cshtml"
                 Write(CommonLanguage.Common_Sure);

            
            #line default
            #line hidden
WriteLiteral("\',\r\n            cancelValue: \'");


            
            #line 172 "..\..\Views\Examination\AuthorizedExam.cshtml"
                     Write(CommonLanguage.Common_Cancel);

            
            #line default
            #line hidden
WriteLiteral("\',\r\n            height: 50,\r\n            fixed: true,\r\n            lock: true,\r\n " +
"           ok: function () {\r\n                $.getJSON(\"/Examination/ExamDelAut" +
"horizedPerson\", { newIds: id, oldIds: $(\"#personids\").val() }, function (data) {" +
"\r\n                    $(\"#personids\").val(data);\r\n                    //更新列表\r\n  " +
"                  InitTable();\r\n                });\r\n            },\r\n           " +
" cancel: function () {\r\n            }\r\n        });\r\n        \r\n    }\r\n\r\n    funct" +
"ion SelectDept() {\r\n//        var ids = \'\';\r\n//        $(\"#deptTree input:checkb" +
"ox[checked=\'true\']\").each(function () {\r\n//            ids = ids + $(this).attr(" +
"\"id\") + \",\";\r\n//        });\r\n        //        ids = ids.substring(0, ids.length" +
" - 1);\r\n\r\n        var p = GetDepts();\r\n        if (p.ids == \"\") {\r\n            /" +
"/art.dialog({ content: \"请选择部门！\", time: 3 });\r\n            art.dialog.tips(\"请选择部门" +
"\", 3);\r\n            return;\r\n        }\r\n        $.getJSON(\"/Examination/ExamAddA" +
"uthorizedPerson\", { newIds: p.ids, oldIds: $(\"#personids\").val(), idsFlag: 0 }, " +
"function(data) {\r\n            if (data.Isnull == 1) {\r\n                //谈对话框\r\n " +
"               //art.dialog({ content: \"该部门下没有人员，请重新选择！\", time: 3 });\r\n         " +
"       art.dialog.tips(\"该部门下没有人员，请重新选择\", 3);\r\n                return;\r\n         " +
"   } else {\r\n                $(\"#personids\").val(data.result);\r\n                " +
"//更新列表\r\n                InitTable();\r\n            }\r\n        });\r\n        art.di" +
"alog.list[\'DeptTree\'].close();\r\n    }\r\n\r\n    function SelectPost() {\r\n//        " +
"var ids = \'\';\r\n//        $(\"#postTree input:checkbox[checked=\'true\']\").each(func" +
"tion () {\r\n//            ids = ids + $(this).attr(\"id\") + \",\";\r\n//        });\r\n " +
"       //        ids = ids.substring(0, ids.length - 1);\r\n\r\n        var p = GetP" +
"osts();\r\n        if (p.ids == \"\") {\r\n            //art.dialog({ content: \"请选择岗位！" +
"\", time: 3 });\r\n            art.dialog.tips(\"请选择岗位\", 3);\r\n            return;\r\n " +
"       }\r\n        $.getJSON(\"/Examination/ExamAddAuthorizedPerson\", { newIds: p." +
"ids, oldIds: $(\"#personids\").val(), idsFlag: 1 }, function(data) {\r\n            " +
"if (data.Isnull == 1) {\r\n                //谈对话框\r\n                //art.dialog({ " +
"content: \"该岗位下没有人员，请重新选择！\", time: 3 });\r\n                art.dialog.tips(\"该岗位下没有" +
"人员，请重新选择\", 3);\r\n                return;\r\n            } else {\r\n                $" +
"(\"#personids\").val(data.result);\r\n                //更新列表\r\n                InitTa" +
"ble();\r\n            }\r\n        });\r\n        art.dialog.list[\'PostTree\'].close();" +
"\r\n    }\r\n\r\n    function GetUserIDList() {\r\n        if ($(\"#SelectUserFlag\").val(" +
") == \"AuthorizedExam\") {\r\n            var userAdd = GetChecked(\'pop_userList\');\r" +
"\n            if (userAdd == \"\") {\r\n                //art.dialog({ content: \"请选择人" +
"员！\", time: 3 });\r\n                art.dialog.tips(\"请选择人员\", 3);\r\n                " +
"return;\r\n            }\r\n\r\n            $.getJSON(\"/Examination/ExamAddAuthorizedP" +
"erson\", { newIds: userAdd, oldIds: $(\"#personids\").val(), idsFlag: 2 }, function" +
"(data) {\r\n                if (data.Isnull == 1) {\r\n                    //谈对话框\r\n " +
"                   //art.dialog({ content: \"请选择人员！\", time: 3 });\r\n              " +
"      art.dialog.tips(\"请选择人员\", 3);\r\n                } else {\r\n                  " +
"  $(\"#personids\").val(data.result);\r\n                    //更新列表\r\n               " +
"     InitTable();\r\n                }\r\n            });\r\n        }\r\n\r\n        if (" +
"$(\"#SelectUserFlag\").val() == \"ApprovalUser\") {\r\n            var userAdd2 = GetC" +
"hecked(\'pop_userList\');\r\n            if (userAdd2 == \"\") {\r\n                //ar" +
"t.dialog({ content: \"请选择批阅人！\", time: 3 });\r\n                art.dialog.tips(\"请选择" +
"批阅人\", 3);\r\n                return;\r\n            }\r\n            $.getJSON(\"/Exami" +
"nation/ExamAddAuthorizedPerson\", { newIds: userAdd2, oldIds: $(\"#ApprovalUserIds" +
"\").val(), idsFlag: 2 }, function(data) {\r\n                if (data.Isnull == 1) " +
"{\r\n                    //谈对话框\r\n                } else {\r\n                    $(\"" +
"#ApprovalUserIds\").val(data.result);\r\n                    //更新列表\r\n              " +
"      AddApprovalUser();\r\n                }\r\n            });\r\n        }\r\n       " +
" $(\"#AllUserID\").val(\"\");\r\n        $(\"#SelectUserFlag\").val(\"\");\r\n        art.di" +
"alog.list[\'SelUser\'].close();\r\n    }\r\n\r\n    function InitTable() {\r\n        var " +
"templateId = \'\';\r\n//        if ($(\".listOn\").length > 0) {\r\n//            $(\"#pe" +
"rsonlist\").addClass(\"Wordlist\").removeClass(\"Piclist\");\r\n//            templateI" +
"d = \'userListTemplate\';\r\n//        } else {\r\n//            $(\"#personlist\").addC" +
"lass(\"Piclist\").removeClass(\"Wordlist\");\r\n//            templateId = \'userBlockT" +
"emlpate\';\r\n//        }\r\n\r\n\r\n        $(\"#personlist\").JsRenderData({\r\n           " +
" sourceUrl: \'/Examination/GetAuthorizedExamUserList?userIds=\' + $(\"#personids\")." +
"val() +\r\n                \'&personName=\' + escape($(\"#PersonName\").val()) +\r\n    " +
"            \'&personCode=\' + escape($(\"#PersonCode\").val()) +\r\n                \'" +
"&personPost=\' + escape($(\"#PersonPost\").val()) +\r\n                \'&personDepart" +
"ment=\' + escape($(\"#PersonDepartment\").val()) +\r\n                \'&t=\' + new Dat" +
"e(),\r\n            isPage: true,\r\n            pageSize: 20,\r\n            pageInde" +
"x: 1,\r\n            templateID: \"userListTemplate\",\r\n//            templateID: te" +
"mplateId,\r\n            funCallback: function() {\r\n                SetCheckBox(\'s" +
"electall\', \"personlist\");\r\n            }\r\n        });\r\n    }\r\n\r\n    function Cha" +
"ngtbExamSendStudent(examId) {\r\n        $.getJSON(\"/Examination/ChangtbExamSendSt" +
"udent\", { personids: $(\"#personids\").val(), examId: examId }, function(data) {\r\n" +
"            if (data.result == 1) {\r\n                art.dialog({\r\n             " +
"       content: \"保存成功！\",\r\n                    time: 3,\r\n                    clos" +
"e: function() {\r\n                        window.location.href = \'/Examination/Ex" +
"aminationList\';\r\n                    }\r\n                });\r\n            } else " +
"{\r\n                //art.dialog({ content: data.content });\r\n                art" +
".dialog.tips(data.content, 3);\r\n            }\r\n        });\r\n    }\r\n</script>");


        }
    }
}
#pragma warning restore 1591
